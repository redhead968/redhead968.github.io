<!DOCTYPE html>
<html>

<head>
    <link rel="icon" type="image/jpeg"
        href="https://www.kyair.org.il/moaza/Departments/hinuch/PublishingImages/%D7%A1%D7%9E%D7%9C%20%D7%90%D7%99%D7%9C%D7%9F%20%D7%A8%D7%9E%D7%95%D7%9F.jpg">
    <style>
        div {
            border: 1px solid black;
            padding: 10px;
            width: 150px;
        }
    </style>
    <title>אתר שעות התנדבות - חיפוש</title>
    <style>
        * {
            --text_back: #0b0b0f;
            --background: #011D28;
            --login_h: #011628;
            --login: #022132;
            --tabs: #012F3D;
            --dim-bg: #053352;
            --menu: #014751;
            --tabs_button: #006469;
            --tabs_button_a: #008080;
            --tabs_button_h: #12A592;
            --my-message-color: #41c3b2;
            --bright-bg: #11e9cc;

            --text_passive-gray: #a4ada0;
            --scrollbar: #F1FFEB88;
            --message-color: #f1f1f1;
            --text_passive: #F1FFEB;

            --good-bright: #16ff5c;
            --good: #0de94f;
            --good-medium: #0ebe43;
            --good-dark: #054719;
            --bad-bright: #f00a1d;
            --bad: #e2081a;
            --bad-medium: #9c0814;
            --bad-dark: #68060e;
            --neutral: #0028da;
        }
    </style>
</head>

<body style="background-color:rgb(240, 240, 240);" dir="rtl">
    <center>
        <h1>שעות התנדבות</h1>
    </center>
    <script src="data.js"></script>
    <script>
        var hash = location.hash;
        hash = decodeURIComponent(hash);

        hash = hash.replace("#", "");
        var lines = data.split("\n").filter(line => line.length > 0);
        console.log("hash = " +  hash);

        for (var i = 0; i < lines.length; i++) {
            lines[i] = lines[i].split(",");
        }

        // console.log({
        //     "timestamp": "2022-12-04",
        //     "name": "shimon",
        //     "hour": "15:46"
        // })


        function convertToObj(a, b) {
            if (a.length != b.length || a.length == 0 || b.length == 0) {
                return null;
            }
            let obj = {};

            // Using the foreach method
            a.forEach((k, i) => { obj[k] = b[i] })
            return obj;
        }


        var objects = [];
        var whitelist = [];

        for (var i = 1; i < lines.length; i++) {
            objects.push(convertToObj(lines[0], lines[i]))


        }
        var space = " ";
        // console.log(lines);
        // console.log(objects);

        for (var i = 0; i < objects.length; i++) {
            // -=+=- if object = # according to checkNames -=+=- \\
            var object = objects[i];
            var family = object["שם משפחה של התלמיד/ה"];
            var name = object["שם פרטי של התלמיד/ה"];
            // window.console.log(name + space + family);
            if (checkNames(hash,name,family)) {
                whitelist.push(object)
            }
        }
        console.log(whitelist)
        function checkNames(full, name, family) {
            if (name + space + family == full) {
                return true;
            } else {
                return false;
            }
            // -=+=- check if full = name + famliy -=+=- 
        }
    </script>
</body>

</html>